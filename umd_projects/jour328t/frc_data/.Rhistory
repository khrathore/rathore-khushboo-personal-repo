rename(state_id_office = state_id) %>%
left_join(legi_all, by = c("trip_id", "trip_approver_id")) %>%
mutate(start_date = mdy(start_date)) %>%
mutate(end_date = mdy(end_date)) %>%
mutate(filed_date = mdy(filed_date)) %>%
rename(end_travel_date = end_date, begin_travel_date = start_date) %>%
filter(year(filed_date) < 2018) %>%
left_join(legi_traveler, by = "trip_traveler_id") %>%
mutate(member_id = member_id.x) %>%
select(-member_id.x, -member_id.y) %>%
select(trip_id:office_id, trip_traveler_id, begin_travel_date, end_travel_date, filed_date, is_amended, core_person_id, member_id, form_pdf) %>%
left_join(legi_people, by = "core_person_id") %>%
rename(core_traveler_id = core_person_id, filer_lastname = last_name, filer_firstname = first_name) %>%
select(-suffix) %>%
left_join(legi_membername, by = "member_id") %>%
rename(id = bioguide_id)
senate_legi_clean <- legi_with_member %>%
distinct(trip_id, .keep_all = TRUE) %>%
filter(str_detect(name, "Senate")) %>%
rename(state_id_office = state_id) %>%
left_join(legi_all, by = c("trip_id", "trip_approver_id")) %>%
mutate(start_date = mdy(start_date)) %>%
mutate(end_date = mdy(end_date)) %>%
mutate(filed_date = mdy(filed_date)) %>%
rename(end_travel_date = end_date, begin_travel_date = start_date) %>%
filter(year(filed_date) < 2018) %>%
left_join(legi_traveler, by = "trip_traveler_id") %>%
mutate(member_id = member_id.x) %>%
select(-member_id.x, -member_id.y) %>%
select(trip_id:office_id, trip_traveler_id, begin_travel_date, end_travel_date, filed_date, is_amended, core_person_id, member_id, form_pdf) %>%
left_join(legi_people, by = "core_person_id") %>%
rename(core_traveler_id = core_person_id, filer_lastname = last_name, filer_firstname = first_name, date_received = transaction_date) %>%
select(-suffix) %>%
left_join(legi_membername, by = "member_id") %>%
rename(id = bioguide_id)
senate_legi_clean <- legi_with_member %>%
distinct(trip_id, .keep_all = TRUE) %>%
filter(str_detect(name, "Senate")) %>%
rename(state_id_office = state_id) %>%
left_join(legi_all, by = c("trip_id", "trip_approver_id")) %>%
mutate(start_date = mdy(start_date)) %>%
mutate(end_date = mdy(end_date)) %>%
mutate(filed_date = mdy(filed_date)) %>%
rename(end_travel_date = end_date, begin_travel_date = start_date) %>%
filter(year(filed_date) < 2018) %>%
left_join(legi_traveler, by = "trip_traveler_id") %>%
mutate(member_id = member_id.x) %>%
select(-member_id.x, -member_id.y) %>%
select(trip_id:office_id, trip_traveler_id, begin_travel_date, end_travel_date, filed_date, is_amended, core_person_id, member_id, form_pdf) %>%
left_join(legi_people, by = "core_person_id") %>%
rename(core_traveler_id = core_person_id, filer_lastname = last_name, filer_firstname = first_name, date_received = date_filed) %>%
select(-suffix) %>%
left_join(legi_membername, by = "member_id") %>%
rename(id = bioguide_id)
senate_legi_clean <- legi_with_member %>%
distinct(trip_id, .keep_all = TRUE) %>%
filter(str_detect(name, "Senate")) %>%
rename(state_id_office = state_id) %>%
left_join(legi_all, by = c("trip_id", "trip_approver_id")) %>%
mutate(start_date = mdy(start_date)) %>%
mutate(end_date = mdy(end_date)) %>%
mutate(filed_date = mdy(filed_date)) %>%
rename(end_travel_date = end_date, begin_travel_date = start_date) %>%
filter(year(filed_date) < 2018) %>%
left_join(legi_traveler, by = "trip_traveler_id") %>%
mutate(member_id = member_id.x) %>%
select(-member_id.x, -member_id.y) %>%
select(trip_id:office_id, trip_traveler_id, begin_travel_date, end_travel_date, filed_date, is_amended, core_person_id, member_id, form_pdf) %>%
left_join(legi_people, by = "core_person_id") %>%
rename(core_traveler_id = core_person_id, filer_lastname = last_name, filer_firstname = first_name, date_received = filed_date) %>%
select(-suffix) %>%
left_join(legi_membername, by = "member_id") %>%
rename(id = bioguide_id)
senate_legi_joins <- legi_with_member %>%
distinct(trip_id, .keep_all = TRUE) %>%
filter(str_detect(name, "Senate")) %>%
rename(state_id_office = state_id) %>%
left_join(legi_all, by = c("trip_id", "trip_approver_id")) %>%
mutate(start_date = mdy(start_date)) %>%
mutate(end_date = mdy(end_date)) %>%
mutate(filed_date = mdy(filed_date)) %>%
rename(end_travel_date = end_date, begin_travel_date = start_date) %>%
filter(year(filed_date) < 2018) %>%
left_join(legi_traveler, by = "trip_traveler_id") %>%
mutate(member_id = member_id.x) %>%
select(-member_id.x, -member_id.y) %>%
select(trip_id:office_id, trip_traveler_id, begin_travel_date, end_travel_date, filed_date, is_amended, core_person_id, member_id, form_pdf) %>%
left_join(legi_people, by = "core_person_id") %>%
rename(core_traveler_id = core_person_id, filer_lastname = last_name, filer_firstname = first_name, date_received = filed_date) %>%
select(-suffix) %>%
left_join(legi_membername, by = "member_id") %>%
senate_legi_clean <- senate_legi_joins
senate_legi_joins <- legi_with_member %>%
distinct(trip_id, .keep_all = TRUE) %>%
filter(str_detect(name, "Senate")) %>%
rename(state_id_office = state_id) %>%
left_join(legi_all, by = c("trip_id", "trip_approver_id")) %>%
mutate(start_date = mdy(start_date)) %>%
mutate(end_date = mdy(end_date)) %>%
mutate(filed_date = mdy(filed_date)) %>%
rename(end_travel_date = end_date, begin_travel_date = start_date) %>%
filter(year(filed_date) < 2018) %>%
left_join(legi_traveler, by = "trip_traveler_id") %>%
mutate(member_id = member_id.x) %>%
select(-member_id.x, -member_id.y) %>%
select(trip_id:office_id, trip_traveler_id, begin_travel_date, end_travel_date, filed_date, is_amended, core_person_id, member_id, form_pdf) %>%
left_join(legi_people, by = "core_person_id") %>%
rename(core_traveler_id = core_person_id, filer_lastname = last_name, filer_firstname = first_name, date_received = filed_date) %>%
select(-suffix) %>%
left_join(legi_membername, by = "member_id")
senate_legi_clean <- senate_legi_joins %>%
rename(id = bioguide_id) %>%
mutate(source = "legistorm") %>%
mutate(filer_lastname = str_to_upper(filer_lastname)) %>%
mutate(filer_firstname = str_to_upper(filer_firstname))
hc_data <- read_csv("data/senate_data_with_propublica/clean_propub_senate_current.csv") %>%
filter(reporting_year > 2017)
hc_data <- read_csv("data/senate_data_with_propublica/clean_propub_senate_current.csv") %>%
filter(reporting_year > 2017)
hc_data <- read_csv("data/senate_data_with_propublica/clean_propub_senate_current.csv") %>%
filter(reporting_year > 2017) %>%
mutate(office_lastname = gsub("\\.", "", office_lastname))
hc_data <- read_csv("data/senate_data_with_propublica/clean_propub_senate_current.csv") %>%
filter(reporting_year > 2017) %>%
mutate(office_last_name = gsub("\\.", "", office_last_name))
write_csv(hc_data, "data/senate_data_with_propublica/clean_propub_senate_current.csv")
install.packages("yaml")
install.packages("yaml")
library(yaml)
library(xml2)
library(methods)
library(tidyverse)
library(XML)
library(furrr)
library(stringi)
library(httr)
library(rlang)
library(janitor)
library(paws)
library(aws.s3)
library(tools)
library(pdftools)
library(sys)
library(ppcong)
library(jsonlite)
library(fuzzyjoin)
library(yaml)
download.file("https://github.com/unitedstates/congress-legislators/blob/main/legislators-current.yaml", "data/historical_legislators.yml")
historic_data <-
history_mems <- yaml.load_file("data/historical_legislators.yml")
history_mems <- yaml.load_file("data/historical_legislators.yml")
download.file("https://raw.githubusercontent.com/unitedstates/congress-legislators/main/legislators-current.yaml", "data/historical_legislators.yml")
history_mems <- yaml.load_file("data/historical_legislators.yml")
View(history_mems)
View(history_mems)
history_mems <- read_yaml(yaml.load_file("data/historical_legislators.yml"))
history_mems <- read_yaml("data/historical_legislators.yml")
# Convert the YAML data into a data frame
to_dataframe <- function(yaml_data) {
# Extract keys (column names) from the first entry
keys <- names(yaml_data[[1]])
# Initialize an empty data frame with column names
df <- data.frame(matrix(ncol = length(keys), nrow = length(yaml_data), dimnames = list(NULL, keys)))
# Loop through YAML data and fill in the data frame
for (i in seq_along(yaml_data)) {
df[i, ] <- unlist(yaml_data[[i]])
}
return(df)
}
# Convert YAML data to data frame
legislators_df <- to_dataframe(history_mems)
View(legislators_df)
history_unnest <- history_mems %>%
unlist()
# Define the flatten_list function
flatten_list <- function(lst) {
result <- list()
for (item in lst) {
if (is.list(item)) {
result <- c(result, flatten_list(item))
} else {
result <- c(result, item)
}
}
return(result)
}
# Read the YAML file
yaml_data <- yaml.load_file("https://raw.githubusercontent.com/unitedstates/congress-legislators/main/legislators-current.yaml")
# Flatten the nested list
flattened_yaml <- flatten_list(yaml_data)
# Convert the flattened list to a data frame
yaml_df <- as.data.frame(t(sapply(flattened_yaml, unlist)))
View(yaml_df)
View(yaml_data)
download.file("https://theunitedstates.io/congress-legislators/legislators-current.csv", "data/historical_legislators.csv")
download.file("https://theunitedstates.io/congress-legislators/legislators-current.csv", "data/current_legislators.csv")
download.file("https://theunitedstates.io/congress-legislators/legislators-historical.csv", "data/historical_legislators.csv")
download.file("https://theunitedstates.io/congress-legislators/legislators-current.csv", "data/current_legislators.csv")
historical <- read_csv("data/historical_legislators.csv")
current <- read_csv("data/current_legislators.csv")
View(historical)
historical <- read_csv("data/historical_legislators.csv") %>%
filter(type == "sen")
historical <- read_csv("data/historical_legislators.csv") %>%
filter(type == "sen")
current <- read_csv("data/current_legislators.csv") %>%
filter(type == "sen")
View(senate_legi_clean)
View(senate_trips)
View(legi_all)
View(legi_all)
senate_legi_joins <- legi_with_member %>%
distinct(trip_id, .keep_all = TRUE) %>%
filter(str_detect(name, "Senate")) %>%
rename(state_id_office = state_id) %>%
left_join(legi_all, by = c("trip_id", "trip_approver_id")) %>%
mutate(start_date = mdy(start_date)) %>%
mutate(end_date = mdy(end_date)) %>%
mutate(filed_date = mdy(filed_date)) %>%
rename(end_travel_date = end_date, begin_travel_date = start_date) %>%
filter(year(filed_date) < 2018) %>%
left_join(legi_traveler, by = "trip_traveler_id") %>%
mutate(member_id = member_id.x) %>%
select(-member_id.x, -member_id.y) %>%
select(trip_id:office_id, trip_traveler_id, begin_travel_date, end_travel_date, filed_date, is_amended, core_person_id, member_id, form_pdf) %>%
left_join(legi_people, by = "core_person_id") %>%
rename(core_traveler_id = core_person_id, filer_lastname = last_name, filer_firstname = first_name, date_received = filed_date, doc_url = form_pdf) %>%
select(-suffix) %>%
left_join(legi_membername, by = "member_id")
senate_legi_clean <- senate_legi_joins %>%
rename(id = bioguide_id) %>%
mutate(source = "legistorm") %>%
mutate(reporting_year = year(date_received)) %>%
mutate(filer_lastname = str_to_upper(filer_lastname)) %>%
mutate(filer_firstname = str_to_upper(filer_firstname)) %>%
select(filer_lastname, filer_firstname, reporting_year, begin_travel_date, end_travel_date, date_received, docs_url, source, id)
senate_legi_clean <- senate_legi_joins %>%
rename(id = bioguide_id) %>%
mutate(source = "legistorm") %>%
mutate(reporting_year = year(date_received)) %>%
mutate(filer_lastname = str_to_upper(filer_lastname)) %>%
mutate(filer_firstname = str_to_upper(filer_firstname)) %>%
select(filer_lastname, filer_firstname, reporting_year, begin_travel_date, end_travel_date, date_received, doc_url, source, id)
View(current)
historical <- fromJSON("data/historical_legislators.json") %>%
legi_with_member <- legi_all %>%
select(trip_id, trip_approver_id)  %>%
left_join(legi_approvals , by = "trip_approver_id") %>%
select(trip_id, trip_approver_id, member_id) %>%
left_join(legi_members, by = "member_id") %>%
select(trip_id, trip_approver_id, member_id, office_id) %>%
left_join(legi_office, by = "office_id")
historical <- fromJSON("data/historical_legislators.json")
download.file("https://theunitedstates.io/congress-legislators/legislators-historical.json", "data/historical_legislators.json")
download.file("https://theunitedstates.io/congress-legislators/legislators-current.json", "data/current_legislators.json")
historical <- fromJSON("data/historical_legislators.json")
View(historical)
View(historical[[26]][[1]])
all_matches <- fromJSON("event_matches.json")
setwd("~/Desktop/GitHub/rathore-khushboo-personal-repo/umd_projects/jour328t/frc_data")
install.packages("tidyverse")
install.packages("jsonlite")
library(tidyverse)
library(jsonlite)
current_teams <- fromJSON("frc_allcurrent.json")
all_teams <- fromJSON("frc_allteams.json")
dead_teams <- all_teams %>%
anti_join(current_teams)
write_json(dead_teams, "frc_deadteams.json")
all_matches <- fromJSON("event_matches.json")
#install.packages("xml2")
#install.packages("lubridate")
#install.packages("tidyr")
#install.packages("tidyverse")
#install.packages("dplyr")
#install.packages("XML")
#install.packages("purrr")
#install.packages("furrr")
#install.packages('remotes')
#remotes::install_github("mkearney/dapr")
#remotes::install_url("https://cran.r-project.org/src/contrib/Archive/tfse/tfse_0.5.0.tar.gz")
#remotes::install_github("mkearney/ppcong")
#install.packages("stringi")
#install.packages('fuzzyjoin')
library(xml2)
library(methods)
library(tidyverse)
library(XML)
library(furrr)
library(stringi)
library(httr)
library(rlang)
library(janitor)
library(paws)
library(aws.s3)
library(tools)
library(pdftools)
library(sys)
library(ppcong)
library(jsonlite)
library(fuzzyjoin)
library(yaml)
legi_all <- read_csv("../legistorm/trip.csv")
legi_all <- read_csv("../legistorm/trip.csv")
legi_approvals <- read_csv("../legistorm/trip_approver.csv")
legi_members <- read_csv("../legistorm/member_office.csv")
legi_membername <- read_csv("../legistorm/member.csv")
legi_office <- read_csv("../legistorm/office.csv")
legi_office <- read_csv("../legistorm/office.csv")
hc_data <- read_csv("data/senate_data_with_propublica/clean_propub_senate_current.csv")
download.file("https://theunitedstates.io/congress-legislators/legislators-historical.json", "data/historical_legislators.json")
download.file("https://theunitedstates.io/congress-legislators/legislators-current.json", "data/current_legislators.json")
historical <- fromJSON("data/historical_legislators.json")
current <- fromJSON("data/current_legislators.json")
legi_with_member <- legi_all %>%
select(trip_id, trip_approver_id)  %>%
left_join(legi_approvals , by = "trip_approver_id") %>%
select(trip_id, trip_approver_id, member_id) %>%
left_join(legi_members, by = "member_id") %>%
select(trip_id, trip_approver_id, member_id, office_id) %>%
left_join(legi_office, by = "office_id")
legi_with_member <- legi_all %>%
select(trip_id, trip_approver_id)  %>%
left_join(legi_approvals , by = "trip_approver_id") %>%
select(trip_id, trip_approver_id, member_id) %>%
left_join(legi_members, by = "member_id") %>%
select(trip_id, trip_approver_id, member_id, office_id) %>%
left_join(legi_office, by = "office_id")
senate_legi_joins <- legi_with_member %>%
distinct(trip_id, .keep_all = TRUE) %>%
filter(str_detect(name, "Senate")) %>%
rename(state_id_office = state_id) %>%
left_join(legi_all, by = c("trip_id", "trip_approver_id")) %>%
mutate(start_date = mdy(start_date)) %>%
mutate(end_date = mdy(end_date)) %>%
mutate(filed_date = mdy(filed_date)) %>%
rename(end_travel_date = end_date, begin_travel_date = start_date) %>%
filter(year(filed_date) < 2018) %>%
left_join(legi_traveler, by = "trip_traveler_id") %>%
mutate(member_id = member_id.x) %>%
select(-member_id.x, -member_id.y) %>%
select(trip_id:office_id, trip_traveler_id, begin_travel_date, end_travel_date, filed_date, is_amended, core_person_id, member_id, form_pdf) %>%
left_join(legi_people, by = "core_person_id") %>%
rename(core_traveler_id = core_person_id, filer_lastname = last_name, filer_firstname = first_name, date_received = filed_date, doc_url = form_pdf) %>%
select(-suffix) %>%
left_join(legi_membername, by = "member_id")
legi_traveler <- read_csv("../legistorm/trip_traveler.csv")
legi_traveler <- read_csv("../legistorm/trip_traveler.csv")
legi_people <- read_csv("../legistorm/core_person.csv")
legi_with_member <- legi_all %>%
select(trip_id, trip_approver_id)  %>%
left_join(legi_approvals , by = "trip_approver_id") %>%
select(trip_id, trip_approver_id, member_id) %>%
left_join(legi_members, by = "member_id") %>%
select(trip_id, trip_approver_id, member_id, office_id) %>%
left_join(legi_office, by = "office_id")
senate_legi_joins <- legi_with_member %>%
distinct(trip_id, .keep_all = TRUE) %>%
filter(str_detect(name, "Senate")) %>%
rename(state_id_office = state_id) %>%
left_join(legi_all, by = c("trip_id", "trip_approver_id")) %>%
mutate(start_date = mdy(start_date)) %>%
mutate(end_date = mdy(end_date)) %>%
mutate(filed_date = mdy(filed_date)) %>%
rename(end_travel_date = end_date, begin_travel_date = start_date) %>%
filter(year(filed_date) < 2018) %>%
left_join(legi_traveler, by = "trip_traveler_id") %>%
mutate(member_id = member_id.x) %>%
select(-member_id.x, -member_id.y) %>%
select(trip_id:office_id, trip_traveler_id, begin_travel_date, end_travel_date, filed_date, is_amended, core_person_id, member_id, form_pdf) %>%
left_join(legi_people, by = "core_person_id") %>%
rename(core_traveler_id = core_person_id, filer_lastname = last_name, filer_firstname = first_name, date_received = filed_date, doc_url = form_pdf) %>%
select(-suffix) %>%
left_join(legi_membername, by = "member_id")
View(senate_legi_joins)
senate_legi_clean <- senate_legi_joins %>%
rename(id = bioguide_id) %>%
mutate(source = "legistorm") %>%
mutate(reporting_year = year(date_received)) %>%
mutate(filer_lastname = str_to_upper(filer_lastname)) %>%
mutate(filer_firstname = str_to_upper(filer_firstname)) %>%
select(filer_lastname, filer_firstname, reporting_year, begin_travel_date, end_travel_date, date_received, doc_url, source, id)
View(senate_legi_clean)
View(historical)
View(historical[[26]][[1]])
View(historical[[26]][[1]])
View(historical)
historical_senate <- historical %>%
filter(!is.na(id$lis))
View(historical_senate)
current_senate <- current %>%
filter(!is.na(id$lis))
senate_legi_clean <- senate_legi_joins %>%
rename(id = bioguide_id) %>%
mutate(source = "legistorm") %>%
mutate(reporting_year = year(date_received)) %>%
mutate(filer_lastname = str_to_upper(filer_lastname)) %>%
mutate(filer_firstname = str_to_upper(filer_firstname)) %>%
select(filer_lastname, filer_firstname, reporting_year, begin_travel_date, end_travel_date, date_received, doc_url, source, id) %>%
left_join(historical_senate, by = c("id" == "id$bioguide"))
senate_legi_clean <- senate_legi_joins %>%
rename(id = bioguide_id) %>%
mutate(source = "legistorm") %>%
mutate(reporting_year = year(date_received)) %>%
mutate(filer_lastname = str_to_upper(filer_lastname)) %>%
mutate(filer_firstname = str_to_upper(filer_firstname)) %>%
select(filer_lastname, filer_firstname, reporting_year, begin_travel_date, end_travel_date, date_received, doc_url, source, id) %>%
left_join(historical_senate, by = c("id" = "id$bioguide"))
View(senate_legi_clean)
View(historical_senate)
View(historical_senate)
historical_senate <- historical %>%
filter(!is.na(id$lis)) %>%
rename(id = id$bioguide)
install.packages("tidyverse")
install.packages("jsonlite")
library(tidyverse)
library(jsonlite)
current_teams <- fromJSON("frc_allcurrent.json")
all_teams <- fromJSON("frc_allteams.json")
dead_teams <- all_teams %>%
anti_join(current_teams)
write_json(dead_teams, "frc_deadteams.json")
all_matches <- fromJSON("event_matches.json")
historical_senate <- historical %>%
filter(!is.na(id$lis)) %>%
clean_names()
historical_senate <- historical %>%
filter(!is.na(id$lis)) %>%
clean_names()
View(historical_senate)
current_senate <- current %>%
filter(!is.na(id$lis)) %>%
clean_names()
historical_senate <- historical %>%
filter(!is.na(id$lis)) %>%
clean_names()
senate_legi_clean <- senate_legi_joins %>%
rename(id = bioguide_id) %>%
mutate(source = "legistorm") %>%
mutate(reporting_year = year(date_received)) %>%
mutate(filer_lastname = str_to_upper(filer_lastname)) %>%
mutate(filer_firstname = str_to_upper(filer_firstname)) %>%
select(filer_lastname, filer_firstname, reporting_year, begin_travel_date, end_travel_date, date_received, doc_url, source, id) %>%
left_join(historical_senate, by = c("id" = "id$bioguide"))
View(historical_senate)
senate_legi_clean <- senate_legi_joins %>%
rename(id = bioguide_id) %>%
mutate(source = "legistorm") %>%
mutate(reporting_year = year(date_received)) %>%
mutate(filer_lastname = str_to_upper(filer_lastname)) %>%
mutate(filer_firstname = str_to_upper(filer_firstname)) %>%
select(filer_lastname, filer_firstname, reporting_year, begin_travel_date, end_travel_date, date_received, doc_url, source, id) %>%
left_join(historical_senate, by = c("id" = "id$bioguide "))
senate_legi_clean <- senate_legi_joins %>%
rename(id = bioguide_id) %>%
mutate(source = "legistorm") %>%
mutate(reporting_year = year(date_received)) %>%
mutate(filer_lastname = str_to_upper(filer_lastname)) %>%
mutate(filer_firstname = str_to_upper(filer_firstname)) %>%
select(filer_lastname, filer_firstname, reporting_year, begin_travel_date, end_travel_date, date_received, doc_url, source, id) %>%
left_join(historical_senate, by = c("id" = "'id$bioguide'"))
senate_legi_clean <- senate_legi_joins %>%
rename(id = bioguide_id) %>%
mutate(source = "legistorm") %>%
mutate(reporting_year = year(date_received)) %>%
mutate(filer_lastname = str_to_upper(filer_lastname)) %>%
mutate(filer_firstname = str_to_upper(filer_firstname)) %>%
select(filer_lastname, filer_firstname, reporting_year, begin_travel_date, end_travel_date, date_received, doc_url, source, id) %>%
left_join(historical_senate, by = c("id" = "bioguide"))
senate_legi_clean <- senate_legi_joins %>%
rename(id = bioguide_id) %>%
mutate(source = "legistorm") %>%
mutate(reporting_year = year(date_received)) %>%
mutate(filer_lastname = str_to_upper(filer_lastname)) %>%
mutate(filer_firstname = str_to_upper(filer_firstname)) %>%
select(filer_lastname, filer_firstname, reporting_year, begin_travel_date, end_travel_date, date_received, doc_url, source, id) %>%
left_join(historical_senate, by = c("id" = "id$bioguide"))
historical_senate <- historical %>%
filter(!is.na(id$lis)) %>%
clean_names()
colnames(historical_senate) <- make.names(colnames(historical_senate), unique = TRUE)
View(historical_senate)
hs_clean <- historical_senate %>%
clean_names()
View(hs_clean)
senate_legi_clean <- senate_legi_joins %>%
rename(id = bioguide_id) %>%
mutate(source = "legistorm") %>%
mutate(reporting_year = year(date_received)) %>%
mutate(filer_lastname = str_to_upper(filer_lastname)) %>%
mutate(filer_firstname = str_to_upper(filer_firstname)) %>%
select(filer_lastname, filer_firstname, reporting_year, begin_travel_date, end_travel_date, date_received, doc_url, source, id) %>%
left_join(hs_clean, by = c("id" = "id$bioguide"))
colnames(historical_senate) <- gsub("\\$", "_", colnames(historical_senate))
hs_clean <- historical_senate %>%
clean_names()
View(hs_clean)
View(historical_senate)
View(historical)
install.packages("tidyverse")
install.packages("jsonlite")
library(tidyverse)
library(jsonlite)
current_teams <- fromJSON("frc_allcurrent.json")
all_teams <- fromJSON("frc_allteams.json")
dead_teams <- all_teams %>%
anti_join(current_teams)
write_json(dead_teams, "frc_deadteams.json")
all_matches <- fromJSON("event_matches.json")
install.packages("jsonlite")
View(all_matches)
